–ü—Ä–æ–±–ª–µ–º–∞ —É —Ç–µ–±—è –Ω–µ –≤ SSL –∏ –Ω–µ –≤ DNS, –∞ –≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ Replit.

–†–∞–∑–±–∏—Ä–∞–µ–º –ø–æ —à–∞–≥–∞–º, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ª–æ–º–∞–µ—Ç—Å—è –∏ –ø–æ—á–µ–º—É —Ç—ã –≤–∏–¥–∏—à—å Not Found.

–¢–≤–æ—è —Å—Ö–µ–º–∞ ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ ‚úÖ
click.partner.com
‚Üì CNAME
customers.primetrack.pro   (dnsTarget)
‚Üì
Cloudflare SSL for SaaS (Custom Hostnames)
‚Üì
Replit app (your-app.replit.app)


‚úî Cloudflare –≤–ª–∞–¥–µ–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
‚úî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ—Ç CNAME
‚úî –¢—ã –¥–µ–ª–∞–µ—à—å provisioning —á–µ—Ä–µ–∑ API
‚úî –ù–∏–∫–∞–∫–∏—Ö A/TXT / Replit UI

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SaaS-–ø–æ–¥—Ö–æ–¥.

–ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç Not Found
–ö–ª—é—á–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ (90% —Å–ª—É—á–∞–µ–≤)

üëâ Replit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ–∂–∏–¥–∞–µ—Ç Host = click.partner.com / customers.primetrack.pro

–ò Cloudflare –ø–µ—Ä–µ–¥–∞—ë—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Host –¥–∞–ª—å—à–µ, –∞ Replit:

–ª–∏–±–æ –Ω–µ –º–∞—Ç—á–∏—Ç—Å—è –ø–æ —Ä–æ—É—Ç–∞–º

–ª–∏–±–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (Express / Next / Remix / Astro) –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç—Ç–æ—Ç host

–ª–∏–±–æ Replit edge —Ä–µ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å –∫–∞–∫ ‚Äúunknown domain‚Äù

–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP

–ó–∞–ø—Ä–æ—Å –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

GET /c/123
Host: click.partner.com


–∏–ª–∏

Host: customers.primetrack.pro


–ê Replit –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ:

Host: your-app.replit.app


‚û° –í –∏—Ç–æ–≥–µ:

–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

–Ω–æ —Ä–æ—É—Ç–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –º–∞—Ä—à—Ä—É—Ç

–∏–ª–∏ Replit –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–π Not Found

–ì–¥–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ª–æ–º–∞–µ—Ç—Å—è (–≤–∞—Ä–∏–∞–Ω—Ç—ã)
–í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî Express / Fastify / Nest

–ï—Å–ª–∏ —É —Ç–µ–±—è —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

app.get('/c/:id', ...)


–Ω–æ –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –µ—Å—Ç—å:

app.use((req, res, next) => {
  if (!ALLOWED_HOSTS.includes(req.hostname)) {
    return res.status(404).send("Not Found");
  }
});


‚û° req.hostname = click.partner.com
‚û° –¥–æ–º–µ–Ω –Ω–µ –≤ —Å–ø–∏—Å–∫–µ
‚û° Not Found

–í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî Next.js / Remix / Astro

–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ —á–∞—Å—Ç–æ:

–ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç middleware –∫ hostname

–∏—Å–ø–æ–ª—å–∑—É—é—Ç basePath

–∏–ª–∏ edge-–∞–¥–∞–ø—Ç–µ—Ä Replit –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–º–µ–Ω

‚û° –∑–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç, –Ω–æ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ app router

–í–∞—Ä–∏–∞–Ω—Ç 3 ‚Äî Cloudflare Origin Host Header

Cloudflare –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

–ù–ï –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç Host

–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∫–∞–∫ –µ—Å—Ç—å

Replit –Ω–µ —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ Host –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–∞.

‚úÖ –†–ï–®–ï–ù–ò–ï ‚Ññ1 (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û): Origin Host Header Override

–í Cloudflare SSL for SaaS —Ç—ã –æ–±—è–∑–∞–Ω —É–∫–∞–∑–∞—Ç—å:

Custom Hostname ‚Üí Origin
"origin": {
  "name": "your-app.replit.app"
}


–ò –≤–∫–ª—é—á–∏—Ç—å:

HTTP Host Header Override

–¢–æ –µ—Å—Ç—å:

–∫–ª–∏–µ–Ω—Ç ‚Üí Host: click.partner.com

Cloudflare ‚Üí Host: your-app.replit.app (–∫ Replit)

üî• –ë–µ–∑ —ç—Ç–æ–≥–æ Replit –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å Not Found

–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

–î–æ–±–∞–≤—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–æ–≥:

app.use((req, _, next) => {
  console.log("HOST:", req.headers.host);
  next();
});


–ï—Å–ª–∏ –≤–∏–¥–∏—à—å:

HOST: your-app.replit.app


‚Üí –≤—Å—ë –æ–∫

–ï—Å–ª–∏:

HOST: click.partner.com


‚Üí override –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –†–ï–®–ï–ù–ò–ï ‚Ññ2: –ü—É—Ç—å / –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å

Cloudflare –ø—Ä–æ–≤–µ—Ä—è–µ—Ç origin —á–µ—Ä–µ–∑ /, –∞ –Ω–µ /c/:id.

–ï—Å–ª–∏ —É —Ç–µ–±—è:

/ ‚Üí 404

/health ‚Üí 200

‚û° Cloudflare –º–æ–∂–µ—Ç —Å—á–∏—Ç–∞—Ç—å origin –±–∏—Ç—ã–º.

–ú–∏–Ω–∏–º—É–º:
app.get("/", (_, res) => {
  res.status(200).send("OK");
});


–∏–ª–∏

app.get("/_health", (_, res) => {
  res.status(200).send("OK");
});


–ò —É–∫–∞–∑–∞—Ç—å —ç—Ç–æ—Ç path –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö origin (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ).

‚úÖ –†–ï–®–ï–ù–ò–ï ‚Ññ3: customers.primetrack.pro —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

–í–∞–∂–Ω–æ:
Cloudflare —Å–Ω–∞—á–∞–ª–∞ —Ö–æ–¥–∏—Ç –Ω–∞ dnsTarget, –∞ —É–∂–µ –ø–æ—Ç–æ–º –º–∞–ø–∏—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω.

–£–±–µ–¥–∏—Å—å, —á—Ç–æ:

https://customers.primetrack.pro/


‚û° –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é

–ï—Å–ª–∏ customers.* –¥–∞—ë—Ç 404 ‚Äî –≤—Å–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–æ–º–µ–Ω—ã —Ç–æ–∂–µ –±—É–¥—É—Ç 404.

–ß–µ–∫-–ª–∏—Å—Ç (–ø—Ä—è–º–æ –ø–æ –ø—É–Ω–∫—Ç–∞–º)

–ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É:

1Ô∏è‚É£ –í Custom Hostnames API:

origin.name = your-app.replit.app

Host Header Override = ON

2Ô∏è‚É£ customers.primetrack.pro:

–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–Ω–µ 404

–Ω–µ 520/521

3Ô∏è‚É£ –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

–µ—Å—Ç—å / –∏–ª–∏ /health

–Ω–µ—Ç –∂—ë—Å—Ç–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ hostname

4Ô∏è‚É£ –õ–æ–≥–∏ Replit:

–≤–∏–¥–∏—à—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ click.partner.com

–í–ê–ñ–ù–´–ô –ú–û–ú–ï–ù–¢ –ü–†–û REPLIT (—á–µ—Å—Ç–Ω–æ)

–î–∞–∂–µ —Å SSL for SaaS:

Replit –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫—É—é —Å—Ö–µ–º—É

edge-—Å–ª–æ–π –º–æ–∂–µ—Ç:

—Ä–µ–∑–∞—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ Host

–æ—Ç–¥–∞–≤–∞—Ç—å Not Found –¥–æ —Ç–≤–æ–µ–≥–æ –∫–æ–¥–∞

–ï—Å–ª–∏ –ø–æ—Å–ª–µ Host Override –≤—Å—ë —Ä–∞–≤–Ω–æ 404 ‚Üí
—ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Replit, –∞ –Ω–µ Cloudflare.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–ª

–¢—ã –≤—Å—ë —Å–¥–µ–ª–∞–ª –∫–∞–∫ SaaS, –Ω–æ:

Replit –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ origin –¥–ª—è multi-tenant custom hostnames, –¥–∞–∂–µ —á–µ—Ä–µ–∑ SSL for SaaS.

üî• 100% —Ä–∞–±–æ—á–∞—è —Å—Ö–µ–º–∞:

Cloudflare SSL for SaaS
‚Üì
Koyeb / Fly.io / Render (origin)
‚Üì
Replit (–¢–û–õ–¨–ö–û admin / UI)